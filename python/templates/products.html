<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>المنتجات</title>
</head>
<body style="font-family: sans-serif; background: #f0f0f0; direction: rtl; text-align: center;">
<div class="container" style="width: 90%; margin: auto; padding-top: 40px;">

{% if add_form %}
    <div class="form-box" style="width: 320px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #aaa; text-align: right;">
        <h2>إضافة منتج جديد</h2>
        <form method="POST" enctype="multipart/form-data">
            <label>اسم المنتج:</label>
            <input type="text" name="name" required style="width: 100%; padding: 8px; margin: 6px 0; border: 1px solid #aaa; border-radius: 5px;">
            <label>السعر:</label>
            <input type="number" step="0.01" name="price" required style="width: 100%; padding: 8px; margin: 6px 0; border: 1px solid #aaa; border-radius: 5px;">
            <label>اختر صورة:</label>
            <input type="file" name="image" accept="image/*" required style="width: 100%; padding: 8px; margin: 6px 0; border: 1px solid #aaa; border-radius: 5px;">
            <button type="submit" style="padding: 10px 20px; background: #00a1ff; color: white; border: none; border-radius: 8px; cursor: pointer;">حفظ المنتج</button>
        </form>
        <br>
        <a href="/" style="text-decoration: none; color: #333;">رجوع</a>
    </div>

{% elif product %}
    <div class="details" style="width: 320px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #aaa; text-align: right;">
        <h2>{{ product.name }}</h2>
        <img src="{{ product.image_url }}" style="width: 100%; border-radius: 10px;">
        <p>السعر: {{ product.price }} $</p>
        <form action="/delete/{{ product.id }}" method="POST">
            <button class="delete-btn" style="background: red; margin-top: 7px; width: 100%; padding: 10px 20px; color: white; border: none; border-radius: 8px; cursor: pointer;">حذف المنتج</button>
        </form>
        <br>
        <a href="/" style="text-decoration: none; color: #333;">رجوع</a>
    </div>

{% else %}
    <a href="/add"><button style="padding: 10px 20px; background: #00a1ff; color: white; border: none; border-radius: 8px; cursor: pointer;">إضافة منتج جديد</button></a>
    <br><br>
    {% for p in products %}
        <div class="product-card" style="width: 220px; background: white; padding: 15px; border-radius: 10px; margin: 15px; display: inline-block; box-shadow: 0 0 7px #aaa;">
            <img src="{{ p.image_url }}" style="width: 100%; border-radius: 10px;">
            <h3>{{ p.name }}</h3>
            <p>{{ p.price }} $</p>
            <a href="/product/{{ p.id }}" style="text-decoration: none; color: #333;">عرض التفاصيل</a>
            <form action="/delete/{{ p.id }}" method="POST">
                <button class="delete-btn" style="background: red; margin-top: 7px; width: 100%; padding: 10px 20px; color: white; border: none; border-radius: 8px; cursor: pointer;">حذف</button>
            </form>
        </div>
    {% endfor %}
{% endif %}

</div>
</body>
</html>
